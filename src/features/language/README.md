# Language Feature

–§–∏—á–∞ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —è–∑—ã–∫–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –Ω–∞—Å—Ç—Ä–æ–µ–∫ –≤ –∫—É–∫–∏ –±—Ä–∞—É–∑–µ—Ä–∞.

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- üç™ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ —è–∑—ã–∫–∞ –≤ –∫—É–∫–∏ –±—Ä–∞—É–∑–µ—Ä–∞
- üåê –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —è–∑—ã–∫–∞ –±—Ä–∞—É–∑–µ—Ä–∞ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –ø–æ—Å–µ—â–µ–Ω–∏–∏
- üîÑ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –º–µ–∂–¥—É —Å–µ—Ä–≤–µ—Ä–æ–º –∏ –∫–ª–∏–µ–Ω—Ç–æ–º
- üì± –ü–æ–¥–¥–µ—Ä–∂–∫–∞ SSR –∏ CSR
- üéØ Middleware –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ —è–∑—ã–∫–∞ –Ω–∞ —É—Ä–æ–≤–Ω–µ –∑–∞–ø—Ä–æ—Å–æ–≤

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞

```
src/features/language/
‚îú‚îÄ‚îÄ hooks/
‚îÇ   ‚îî‚îÄ‚îÄ useLanguage.ts          # –•—É–∫ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —è–∑—ã–∫–æ–º
‚îú‚îÄ‚îÄ lib/
‚îÇ   ‚îî‚îÄ‚îÄ serverLanguage.ts       # –°–µ—Ä–≤–µ—Ä–Ω—ã–µ —É—Ç–∏–ª–∏—Ç—ã
‚îú‚îÄ‚îÄ model/
‚îÇ   ‚îî‚îÄ‚îÄ constants.ts            # –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã –∏ —Ç–∏–ø—ã
‚îú‚îÄ‚îÄ ui/
‚îÇ   ‚îú‚îÄ‚îÄ languageProvider.tsx    # –ö–æ–Ω—Ç–µ–∫—Å—Ç –ø—Ä–æ–≤–∞–π–¥–µ—Ä
‚îÇ   ‚îú‚îÄ‚îÄ languageSwitcher.tsx    # –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—è
‚îÇ   ‚îî‚îÄ‚îÄ serverLanguageInitializer.tsx # –°–µ—Ä–≤–µ—Ä–Ω–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
‚îî‚îÄ‚îÄ index.ts                    # –≠–∫—Å–ø–æ—Ä—Ç—ã
```

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### 1. –ü—Ä–æ–≤–∞–π–¥–µ—Ä —É–∂–µ –ø–æ–¥–∫–ª—é—á–µ–Ω –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏

```tsx
// src/app/(providers)/clientProviders.tsx
<LanguageProvider>
	<I18nProvider>{children}</I18nProvider>
</LanguageProvider>
```

### 2. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ö—É–∫–∞

```tsx
import { useLanguageContext } from '@/features/language/ui/languageProvider'

function MyComponent() {
	const { currentLanguage, changeLanguage, isLoading } = useLanguageContext()

	return (
		<button onClick={() => changeLanguage('en')}>
			Current: {currentLanguage}
		</button>
	)
}
```

### 3. –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—è

```tsx
import { LanguageSwitcher } from '@/features/language'

function Header() {
	return (
		<div>
			<LanguageSwitcher className="my-custom-class" />
		</div>
	)
}
```

### 4. –°–µ—Ä–≤–µ—Ä–Ω–æ–µ –ø–æ–ª—É—á–µ–Ω–∏–µ —è–∑—ã–∫–∞

```tsx
import { getServerLanguage } from '@/features/language/lib/serverLanguage'

export default async function MyPage() {
	const language = await getServerLanguage()

	return <div>Server language: {language}</div>
}
```

## –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —è–∑—ã–∫–∏

- `ru` - –†—É—Å—Å–∫–∏–π (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
- `en` - English

–î–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤–æ–≥–æ —è–∑—ã–∫–∞:

1. –î–æ–±–∞–≤—å—Ç–µ –∫–æ–¥ —è–∑—ã–∫–∞ –≤ `SUPPORTED_LANGUAGES` –≤ `constants.ts`
2. –î–æ–±–∞–≤—å—Ç–µ –ø–µ—Ä–µ–≤–æ–¥ –≤ `LANGUAGE_LABELS`
3. –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª –ø–µ—Ä–µ–≤–æ–¥–æ–≤ –≤ `src/shared/i18n/locales/`

## –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

1. **Middleware** –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –∫—É–∫–∏ –ø—Ä–∏ –∫–∞–∂–¥–æ–º –∑–∞–ø—Ä–æ—Å–µ –∏ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç —è–∑—ã–∫ –µ—Å–ª–∏ –µ–≥–æ –Ω–µ—Ç
2. **ServerLanguageInitializer** –ø–µ—Ä–µ–¥–∞–µ—Ç —è–∑—ã–∫ —Å —Å–µ—Ä–≤–µ—Ä–∞ –Ω–∞ –∫–ª–∏–µ–Ω—Ç —á–µ—Ä–µ–∑ –≥–ª–æ–±–∞–ª—å–Ω—É—é –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é
3. **LanguageProvider** –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç —è–∑—ã–∫ –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ –∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç —Å i18n
4. **useLanguage** —Ö—É–∫ —É–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º —è–∑—ã–∫–∞ –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫—É–∫–∏

## –ö—É–∫–∏

- **–ò–º—è**: `preferred-language`
- **–í—Ä–µ–º—è –∂–∏–∑–Ω–∏**: 365 –¥–Ω–µ–π
- **–ü—É—Ç—å**: `/`
- **SameSite**: `lax`

## –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

- –ü—Ä–∏ —Å–º–µ–Ω–µ —è–∑—ã–∫–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–≥–æ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –ø–µ—Ä–µ–≤–æ–¥–æ–≤ –≤ SSR –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö
- –í—Å–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã —Å—Ç–∞–Ω–æ–≤—è—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–º–∏ –∏–∑-–∑–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∫—É–∫–∏
- Fallback –∫ —è–∑—ã–∫—É –±—Ä–∞—É–∑–µ—Ä–∞, –µ—Å–ª–∏ –∫—É–∫–∏ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã
- –ë–µ–∑–æ–ø–∞—Å–Ω–∞—è —Ä–∞–±–æ—Ç–∞ –≤ SSR –æ–∫—Ä—É–∂–µ–Ω–∏–∏
